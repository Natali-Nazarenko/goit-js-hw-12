{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport default async function getImagesByQuery(query, page) {\n    const result =  await axios.get(\"\", {\n        params: {\n            key: '53365397-01e23b351b4d3bf3f9d6eb3f7',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: 15,\n        }\n    })\n    return result.data;\n};","import SimpleLightbox from 'simplelightbox';\n\nexport const gallery = document.querySelector('.gallery');\nexport const btnLoad = document.querySelector('.btn-load');\nconst loader = document.querySelector('.loader');\n\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionPosition: 'bottom',\n        captionDelay: 250,\n    });\n\nexport function createGallery(hits) {\n    const markup = hits.map(imageTemplate).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n}\n\nfunction imageTemplate(img) {\n    return `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${img.largeImageURL }\">\n                    <img\n                        class=\"gallery-image\"\n                        src=\"${img.webformatURL}\"\n                        alt=\"${img.tags }\"\n                    />\n                </a>\n                <ul class=\"statistic-block\">\n                    <li>\n                        <p>Likes</p><span>${img.likes}</span>\n                    </li>\n                    <li>\n                        <p>Views</p><span>${img.views}</span>\n                    </li>\n                    <li>\n                        <p>Comments </p><span>${img.comments}</span>\n                    </li>\n                    <li>\n                        <p>Downloads</p><span>${img.downloads}</span>\n                    </li>\n                </ul>\n            </li>`\n}\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() { \n    btnLoad.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    btnLoad.classList.add('hidden');\n}\n\nexport function clearGallery() { \n    gallery.innerHTML = \"\";\n}\n\n","import iziToast from \"izitoast\";\nimport getImagesByQuery from \"./js/pixabay-api\";\nimport {\n        btnLoad,\n        showLoader,\n        hideLoader,\n        createGallery,\n        showLoadMoreButton,\n        hideLoadMoreButton,\n        clearGallery\n    } from \"./js/render-functions\";\n\n\nconst form = document.querySelector('.form');\nconst per_page = 15;\nlet totalPages;\nlet query;\nlet page;\n\nconst errorText = {\n    user: {\n        title: 'WARNING!',\n        message: 'You didnâ€™t enter the image name!'\n    },\n    api: {\n        title: 'Sorry,',\n        message: 'there are no images matching your search query. Please try again!'\n    },\n    endLoad: {\n        title: '!',\n        message: `We're sorry, but you've reached the end of search results.`\n    },\n    network: {\n        title: 'WARNING!',\n        message: ''\n    }\n}\n\nfunction validInput({ title, message}) {\n        iziToast.show({\n            title,\n            titleColor: 'red',\n            message,\n            position: 'topCenter',\n            messageColor: 'black',\n            color: 'red',\n    });\n}\n\nfunction infoMessage({ title, message }) {\n    iziToast.show({\n            title,\n            titleColor: 'blue',\n            message,\n            position: 'topCenter',\n            messageColor: 'blue',\n            color: 'blue',\n    });\n}\n\nfunction smoothScroll() {\n    const liElement = document.querySelector('.gallery-item');\n    const heightLi = liElement.getBoundingClientRect();\n    const scrollHeight = heightLi.height * 2;\n    \n    window.scrollBy({\n        top: scrollHeight,\n        left: 0,\n        behavior: 'smooth'\n    });\n}\n\nform.addEventListener('submit', async (ev) => {\n    ev.preventDefault();\n    hideLoadMoreButton();\n\n    const inputData = new FormData(form);\n    query = inputData.get('search-text').trim();\n    \n    if (query === '') {\n        return validInput(errorText.user);\n    }\n\n    clearGallery();\n    showLoader();\n\n    try {\n        page = 1;\n   \n        const data = await getImagesByQuery(query, page);\n        totalPages = Math.ceil(data.total / per_page);\n        \n        if (data.total === 0 || data.hits.length === 0) return validInput(errorText.api);\n\n        createGallery(data.hits);\n\n        if (data.hits.length === per_page && page !== totalPages) return showLoadMoreButton();\n        \n    }catch (error) {\n        console.log(error.message);\n        errorText.network.message = error.message;\n        validInput(errorText.network);\n    }finally {\n        hideLoader(); \n    }\n    \n    ev.target.reset();\n})\n\nbtnLoad.addEventListener('click', async () => {\n    showLoader();\n\n    ++page;\n    try {\n        const data = await getImagesByQuery(query, page);\n        totalPages = Math.ceil(data.total / per_page);\n\n        if (page === totalPages) { \n            hideLoadMoreButton();\n            infoMessage(errorText.endLoad);\n        }\n        createGallery(data.hits);\n        smoothScroll();\n    } catch (error) {\n        console.log(error.message);\n        errorText.network.message = error.message\n        validInput(errorText.network);\n    }finally {\n        hideLoader(); \n    }\n})"],"names":["axios","getImagesByQuery","query","page","gallery","btnLoad","loader","lightbox","SimpleLightbox","createGallery","hits","markup","imageTemplate","img","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","clearGallery","form","per_page","totalPages","errorText","validInput","title","message","iziToast","infoMessage","smoothScroll","scrollHeight","ev","data","error"],"mappings":"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"}