{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport default async function getImagesByQuery(query, page) {\n    return await axios.get(\"\", {\n        params: {\n            key: '53365397-01e23b351b4d3bf3f9d6eb3f7',\n            q: query,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: page,\n            per_page: 15,\n        }\n    }\n)};","import SimpleLightbox from 'simplelightbox';\n\nexport const gallery = document.querySelector('.gallery');\nexport const btnLoad = document.querySelector('.btn-load');\nconst loader = document.querySelector('.loader');\n\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n        captionsData: 'alt',\n        captionPosition: 'bottom',\n        captionDelay: 250,\n    });\n\nexport function createGallery(hits) {\n    return hits.map(imageTemplate).join('');\n}\n\nfunction imageTemplate(img) {\n    return `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${img.largeImageURL }\">\n                    <img\n                        class=\"gallery-image\"\n                        src=\"${img.webformatURL}\"\n                        alt=\"${img.tags }\"\n                    />\n                </a>\n                <ul class=\"statistic-block\">\n                    <li>\n                        <p>Likes</p><span>${img.likes}</span>\n                    </li>\n                    <li>\n                        <p>Views</p><span>${img.views}</span>\n                    </li>\n                    <li>\n                        <p>Comments </p><span>${img.comments}</span>\n                    </li>\n                    <li>\n                        <p>Downloads</p><span>${img.downloads}</span>\n                    </li>\n                </ul>\n            </li>`\n}\n\nexport function showLoader() {\n    loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n    loader.classList.add('hidden');\n}\n\nexport function showLoadMoreButton() { \n    btnLoad.classList.remove('hidden');\n}\n\nexport function hideLoadMoreButton() {\n    btnLoad.classList.add('hidden');\n}\n\n","import iziToast from \"izitoast\";\nimport getImagesByQuery from \"./js/pixabay-api\";\nimport {\n    btnLoad,\n    showLoader,\n    hideLoader,\n    createGallery,\n    showLoadMoreButton,\n    hideLoadMoreButton,\n    gallery,\n    lightbox\n    } from \"./js/render-functions\";\n\n\nconst form = document.querySelector('.form');\nconst per_page = 15;\nlet totalPages;\nlet query;\nlet page = 1;\n\nconst errorText = {\n    user: {\n        title: 'WARNING!',\n        message: 'You didnâ€™t enter the image name!'\n    },\n    api: {\n        title: 'Sorry,',\n        message: 'there are no images matching your search query. Please try again!'}\n}\n\nfunction validInput({ title, message}) {\n        iziToast.show({\n            title,\n            titleColor: 'red',\n            message,\n            position: 'topCenter',\n            messageColor: 'black',\n            color: 'red',\n    });\n}\n\nform.addEventListener('submit', async (ev) => {\n    ev.preventDefault();\n\n    const inputData = new FormData(form);\n    query = inputData.get('search-text').trim();\n    \n    if (query === '') {\n        return validInput(errorText.user);\n    }\n\n    showLoader();\n    hideLoadMoreButton();\n\n    try {\n        const { data } = await getImagesByQuery(query, page);\n\n        totalPages = Math.ceil(data.total / per_page);\n        \n        if (data.total === 0 || data.hits.length === 0) return validInput(errorText.api);\n        \n        const markup = createGallery(data.hits);\n        gallery.innerHTML = markup;\n\n        lightbox.refresh();\n\n        if (data.hits.length === per_page) return showLoadMoreButton();\n        \n    }catch (error) {\n            console.log(error.message);\n    }finally {\n        hideLoader(); \n    }\n    \n    ev.target.reset();\n})\n\nbtnLoad.addEventListener('click', async () => {\n    ++page;\n    if (page === totalPages) { \n        hideLoadMoreButton();\n    }\n    const result = await getImagesByQuery(query, page);\n    const markup = createGallery(result.data.hits);\n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    lightbox.refresh();\n})"],"names":["axios","getImagesByQuery","query","page","gallery","btnLoad","loader","lightbox","SimpleLightbox","createGallery","hits","imageTemplate","img","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","per_page","totalPages","errorText","validInput","title","message","iziToast","ev","data","markup","error","result"],"mappings":"owBAEAA,EAAM,SAAS,QAAU,2BAEV,eAAeC,EAAiBC,EAAOC,EAAM,CACxD,OAAO,MAAMH,EAAM,IAAI,GAAI,CACvB,OAAQ,CACJ,IAAK,qCACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACb,CACJ,CACL,CAAC,CCdM,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,WAAW,EACnDC,EAAS,SAAS,cAAc,SAAS,EAGlCC,EAAW,IAAIC,EAAe,aAAc,CACjD,aAAc,MACd,gBAAiB,SACjB,aAAc,GACtB,CAAK,EAEE,SAASC,EAAcC,EAAM,CAChC,OAAOA,EAAK,IAAIC,CAAa,EAAE,KAAK,EAAE,CAC1C,CAEA,SAASA,EAAcC,EAAK,CACxB,MAAO;AAAA,gDACqCA,EAAI,aAAe;AAAA;AAAA;AAAA,+BAGpCA,EAAI,YAAY;AAAA,+BAChBA,EAAI,IAAM;AAAA;AAAA;AAAA;AAAA;AAAA,4CAKGA,EAAI,KAAK;AAAA;AAAA;AAAA,4CAGTA,EAAI,KAAK;AAAA;AAAA;AAAA,gDAGLA,EAAI,QAAQ;AAAA;AAAA;AAAA,gDAGZA,EAAI,SAAS;AAAA;AAAA;AAAA,kBAI7D,CAEO,SAASC,GAAa,CACzBP,EAAO,UAAU,OAAO,QAAQ,CACpC,CAEO,SAASQ,GAAa,CACzBR,EAAO,UAAU,IAAI,QAAQ,CACjC,CAEO,SAASS,GAAqB,CACjCV,EAAQ,UAAU,OAAO,QAAQ,CACrC,CAEO,SAASW,GAAqB,CACjCX,EAAQ,UAAU,IAAI,QAAQ,CAClC,CC3CA,MAAMY,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAW,GACjB,IAAIC,EACAjB,EACAC,EAAO,EAEX,MAAMiB,EAAY,CACd,KAAM,CACF,MAAO,WACP,QAAS,kCACZ,EACD,IAAK,CACD,MAAO,SACP,QAAS,mEAAmE,CACpF,EAEA,SAASC,EAAW,CAAE,MAAAC,EAAO,QAAAC,CAAO,EAAG,CAC/BC,EAAS,KAAK,CACV,MAAAF,EACA,WAAY,MACZ,QAAAC,EACA,SAAU,YACV,aAAc,QACd,MAAO,KACnB,CAAK,CACL,CAEAN,EAAK,iBAAiB,SAAU,MAAOQ,GAAO,CAM1C,GALAA,EAAG,eAAc,EAGjBvB,EADkB,IAAI,SAASe,CAAI,EACjB,IAAI,aAAa,EAAE,KAAI,EAErCf,IAAU,GACV,OAAOmB,EAAWD,EAAU,IAAI,EAGpCP,IACAG,IAEA,GAAI,CACA,KAAM,CAAE,KAAAU,CAAI,EAAK,MAAMzB,EAAiBC,EAAOC,CAAI,EAInD,GAFAgB,EAAa,KAAK,KAAKO,EAAK,MAAQR,CAAQ,EAExCQ,EAAK,QAAU,GAAKA,EAAK,KAAK,SAAW,EAAG,OAAOL,EAAWD,EAAU,GAAG,EAE/E,MAAMO,EAASlB,EAAciB,EAAK,IAAI,EAKtC,GAJAtB,EAAQ,UAAYuB,EAEpBpB,EAAS,QAAO,EAEZmB,EAAK,KAAK,SAAWR,EAAU,OAAOH,EAAkB,CAE/D,OAAOa,EAAO,CACP,QAAQ,IAAIA,EAAM,OAAO,CACrC,QAAK,CACGd,GACH,CAEDW,EAAG,OAAO,OACd,CAAC,EAEDpB,EAAQ,iBAAiB,QAAS,SAAY,CAC1C,EAAEF,EACEA,IAASgB,GACTH,IAEJ,MAAMa,EAAS,MAAM5B,EAAiBC,EAAOC,CAAI,EAC3CwB,EAASlB,EAAcoB,EAAO,KAAK,IAAI,EAC7CzB,EAAQ,mBAAmB,YAAauB,CAAM,EAE9CpB,EAAS,QAAO,CACpB,CAAC"}